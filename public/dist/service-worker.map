{"version":3,"sources":["service-worker.js"],"names":["CACHE_NAME","urlsToCache","self","addEventListener","e","waitUntil","caches","open","then","cache","addAll","skipWaiting","catch","err","console","log","cacheWhitelist","keys","cacheNames","Promise","all","map","cacheName","indexOf","delete","clients","claim","respondWith","match","request","res","fetch"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,EACA;;AACA,IAAMA,UAAU,GAAG,mBAAnB;AAAA,IACEC,WAAW,GAAG,CACZ,sBADY,EAEZ,yDAFY,EAGZ,0EAHY,EAIZ,yDAJY,EAKZ,0EALY,EAMZ,uCANY,EAOZ,sCAPY,CADhB,EAWA;;AACAC,IAAI,CAACC,gBAAL,CAAsB,SAAtB,EAAiC,UAAAC,CAAC,EAAI;AACpCA,EAAAA,CAAC,CAACC,SAAF,CACEC,MAAM,CAACC,IAAP,CAAYP,UAAZ,EACGQ,IADH,CACQ,UAAAC,KAAK,EAAI;AACb,WAAOA,KAAK,CAACC,MAAN,CAAaT,WAAb,EACJO,IADI,CACC;AAAA,aAAMN,IAAI,CAACS,WAAL,EAAN;AAAA,KADD,CAAP;AAED,GAJH,EAKGC,KALH,CAKS,UAAAC,GAAG;AAAA,WAAIC,OAAO,CAACC,GAAR,CAAY,yBAAZ,EAAuCF,GAAvC,CAAJ;AAAA,GALZ,CADF;AAQD,CATD,GAWA;;AACAX,IAAI,CAACC,gBAAL,CAAsB,UAAtB,EAAkC,UAAAC,CAAC,EAAI;AACrC,MAAMY,cAAc,GAAG,CAAChB,UAAD,CAAvB;AAEAI,EAAAA,CAAC,CAACC,SAAF,CACEC,MAAM,CAACW,IAAP,GACGT,IADH,CACQ,UAAAU,UAAU,EAAI;AAClB,WAAOC,OAAO,CAACC,GAAR,CACLF,UAAU,CAACG,GAAX,CAAe,UAAAC,SAAS,EAAI;AAC1B;AACA,UAAIN,cAAc,CAACO,OAAf,CAAuBD,SAAvB,MAAsC,CAAC,CAA3C,EAA8C;AAC5C,eAAOhB,MAAM,CAACkB,MAAP,CAAcF,SAAd,CAAP;AACD;AACF,KALD,CADK,CAAP;AAQD,GAVH,EAWE;AAXF,GAYGd,IAZH,CAYQ;AAAA,WAAMN,IAAI,CAACuB,OAAL,CAAaC,KAAb,EAAN;AAAA,GAZR,CADF;AAeD,CAlBD,GAoBA;;AACAxB,IAAI,CAACC,gBAAL,CAAsB,OAAtB,EAA+B,UAAAC,CAAC,EAAI;AAClC;AACAA,EAAAA,CAAC,CAACuB,WAAF,CACErB,MAAM,CAACsB,KAAP,CAAaxB,CAAC,CAACyB,OAAf,EACGrB,IADH,CACQ,UAAAsB,GAAG,EAAI;AACX,QAAIA,GAAJ,EAAS;AACP;AACA,aAAOA,GAAP;AACD,KAJU,CAKX;;;AACA,WAAOC,KAAK,CAAC3B,CAAC,CAACyB,OAAH,CAAZ;AACD,GARH,CADF;AAWD,CAbD","file":"service-worker.map","sourceRoot":"..\\js","sourcesContent":[";\r\n//asignar un nombre y versión al cache\r\nconst CACHE_NAME = 'v1_cache_test_app',\r\n  urlsToCache = [\r\n    'localhost:3000/login',\r\n    'https://fonts.googleapis.com/css?family=Raleway:400,700',\r\n    'https://fonts.gstatic.com/s/raleway/v12/1Ptrg8zYS_SKggPNwJYtWqZPAA.woff2',\r\n    'https://use.fontawesome.com/releases/v5.0.7/css/all.css',\r\n    'https://use.fontawesome.com/releases/v5.0.6/webfonts/fa-brands-400.woff2',\r\n    'localhost:3000/public/dist/bundle.css',\r\n    'localhost:3000/public/dist/bundle.js'\r\n  ]\r\n\r\n//durante la fase de instalación, generalmente se almacena en caché los activos estáticos\r\nself.addEventListener('install', e => {\r\n  e.waitUntil(\r\n    caches.open(CACHE_NAME)\r\n      .then(cache => {\r\n        return cache.addAll(urlsToCache)\r\n          .then(() => self.skipWaiting())\r\n      })\r\n      .catch(err => console.log('Falló registro de cache', err))\r\n  )\r\n})\r\n\r\n//una vez que se instala el SW, se activa y busca los recursos para hacer que funcione sin conexión\r\nself.addEventListener('activate', e => {\r\n  const cacheWhitelist = [CACHE_NAME]\r\n\r\n  e.waitUntil(\r\n    caches.keys()\r\n      .then(cacheNames => {\r\n        return Promise.all(\r\n          cacheNames.map(cacheName => {\r\n            //Eliminamos lo que ya no se necesita en cache\r\n            if (cacheWhitelist.indexOf(cacheName) === -1) {\r\n              return caches.delete(cacheName)\r\n            }\r\n          })\r\n        )\r\n      })\r\n      // Le indica al SW activar el cache actual\r\n      .then(() => self.clients.claim())\r\n  )\r\n})\r\n\r\n//cuando el navegador recupera una url\r\nself.addEventListener('fetch', e => {\r\n  //Responder ya sea con el objeto en caché o continuar y buscar la url real\r\n  e.respondWith(\r\n    caches.match(e.request)\r\n      .then(res => {\r\n        if (res) {\r\n          //recuperar del cache\r\n          return res\r\n        }\r\n        //recuperar de la petición a la url\r\n        return fetch(e.request)\r\n      })\r\n  )\r\n})"]}